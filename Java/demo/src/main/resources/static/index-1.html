<!DOCTYPE HTML>
<html>
<head>
    <title>Welcome to BOT Testing</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
 <link href="UI/libs/jquery-ui.min.css" rel="stylesheet"/>
<link href="UI/chatWindow.css" rel="stylesheet"/> 
<link href="../libs/purejscarousel.css" rel="stylesheet"></link>
<script src='UI/libs/jquery.js'></script>
<script src='UI/libs/jquery-ui.min.js'></script>
<script src='UI/libs/jquery.tmpl.min.js'></script>
<script src='UI/libs/moment.js'></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/2.4.1/lodash.min.js"></script>
<script src='../libs/anonymousassertion.js'></script>
<script src='../kore-bot-sdk-client.js'></script>
<script src='UI/chatWindow.js'></script>
<script src="../libs/emoji.js" type="text/javascript"></script>
<script src="../libs/recorder.js" type="text/javascript"></script>
<script src="../libs/recorderWorker.js" type="text/javascript"></script>
<script src="../libs/purejscarousel.js" type="text/javascript"></script>


<script src="../libs/speech/app.js" type="text/javascript"></script>
<script src="../libs/speech/key.js" type="text/javascript"></script>
<script src="../libs/client_api.js" type="text/javascript"></script>


<script>

var assertion = function(options, callback) {
    $.ajax({
    url: "jwtToken",
     type: 'GET',
     headers: {},
     dataType: 'json',
     success: function(data) {
        options.assertion = data.token
        callback(null, options);
        }
       }) 
    }

	var botOptions = {};
    botOptions.koreAPIUrl = "https://bots.kore.ai/api/";
    botOptions.koreSpeechAPIUrl = "https://speech.kore.ai/";
    botOptions.ttsSocketUrl = 'wss://speech.kore.ai/tts/ws';
    botOptions.assertionFn = assertion;
    botOptions.koreAnonymousFn = koreAnonymousFn;
    botOptions.clientId   = "cs-c6fc5297-0a1a-51f7-8f31-cd96292fac6b"; 
    botOptions.botInfo = {"name":"test", "_id" :"st-9a415951-bee1-53ba-97d9-3c681c4ceabd"};  
    
    var chatConfig={
        botOptions:botOptions,
        allowIframe : false,
        isSendButton: false, 
        isTTSEnabled: true, 
        isSpeechEnabled: true, 
        allowGoogleSpeech : true, 
        allowLocation : true, 
        loadHistory: false, 
        messageHistoryLimit: 10, 
        autoEnableSpeechAndTTS : false, 
        graphLib: "d3"  

    };
    var chatInstance = koreBotChat(); // get chat instance
    chatInstance.show(chatConfig); // open chat window
    chatInstance.destroy(); // for destroying chat window instance
</script>

</head>
<body>
    <p>Get your greeting <a href="/greeting">here</a></p>
</body>
</html>